
<div class="container mt-1">
  <h2 class="text-center mb-3">ðŸ“… Sales Report</h2>

  <!-- Date Filters -->
  <div class="row g-3 justify-content-between mb-3">
    <div class="col-md-3">
      <label class="form-label fw-semibold">Report Type</label>
      <select class="form-select" [(ngModel)]="viewType" (change)="onViewTypeChange()">
        <option value="item">Item Wise</option>
        <option value="date">Date Wise</option>
      </select>
    </div>
    <div class="col-md-3">
      <label class="form-label fw-semibold">Start Date</label>
      <input type="date" class="form-control" [(ngModel)]="startDate" (change)="filterByDate()">
    </div>
    <div class="col-md-3">
      <label class="form-label fw-semibold">End Date</label>
      <input type="date" class="form-control" [(ngModel)]="endDate" (change)="filterByDate()">
    </div>
  </div>

  <!-- Export Buttons -->
  <div class="row mb-3">
    <div class="col-12 d-flex gap-2 justify-content-end">
      <button class="btn btn-danger btn-sm" (click)="exportToPDF()" title="Export to PDF">
        <i class="bi bi-file-pdf"></i> PDF
      </button>
      <button class="btn btn-primary btn-sm" (click)="exportToWord()" title="Export to Word">
        <i class="bi bi-file-word"></i> Word
      </button>
      <button class="btn btn-success btn-sm" (click)="exportToExcel()" title="Export to Excel">
        <i class="bi bi-file-excel"></i> Excel
      </button>
    </div>
  </div>

  <!-- Item-Wise Table -->
  <div class="table-responsive mt-4" *ngIf="viewType === 'item' && filteredPurchases.length">
    <table class="table table-striped table-hover text-center align-middle shadow-sm">
      <thead class="table-dark">
        <tr>
          <th>Date</th>
          <th>Supplier</th>
          <th>Item</th>
          <th>Qty</th>
          <th>Unit Price</th>
          <th>Total</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let p of filteredPurchases">
          <td>{{ p.date }}</td>
          <td>{{ p.buyer }}</td>
          <td>{{ p.item }}</td>
          <td>{{ p.quantity }}</td>
          <td>{{ p.unitPrice | number:'1.2-2' }}</td>
          <td>{{ p.total | number:'1.2-2' }}</td>
        </tr>
      </tbody>
      <tfoot>
        <tr class="fw-bold text-end">
          <td colspan="5">Total:</td>
          <td>{{ totalAmount | number:'1.2-2' }}</td>
        </tr>
      </tfoot>
    </table>
  </div>

  <!-- Date-Wise Table -->
  <div class="table-responsive mt-4" *ngIf="viewType === 'date' && dateWiseData.length">
    <table class="table table-striped table-hover text-center align-middle shadow-sm">
      <thead class="table-dark">
        <tr>
          <th>Day</th>
          <th>Date</th>
          <th>Number of Purchases</th>
          <th>Total Amount</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let d of dateWiseData">
          <td>{{ d.day }}</td>
          <td>{{ d.date }}</td>
          <td>{{ d.purchaseCount }}</td>
          <td>{{ d.totalAmount | number:'1.2-2' }}</td>
        </tr>
      </tbody>
      <tfoot>
        <tr class="fw-bold text-end">
          <td colspan="3">Total:</td>
          <td>{{ totalAmount | number:'1.2-2' }}</td>
        </tr>
      </tfoot>
    </table>
  </div>

  <!-- No Data Message -->
  <div class="text-center mt-4 text-muted" *ngIf="(viewType === 'item' && !filteredPurchases.length) || (viewType === 'date' && !dateWiseData.length)">
    No purchase data found for the selected date range.
  </div>
</div>


adbed
